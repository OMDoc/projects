PREFIX          = $(HOME)/import/omdoc
EDNUM		=  0072 0073 0081 0082 0091 0097 0508 0515 0520 0546 10059 10085 10091 10092 10094  10101 10119 10121 10122 10127 10128 10147 10148 10149 10163 10168 10170 10171 10172 10175 10177 10180 10202 10203 10235 10257 10276 10283 10292 1031 10368 1038 10169 10403 10414  10417 10420 10421 10422 10423 10424 10428 10430 10434 10435 10438 10441 0041 0100 10224 10431 10456 10461 10474 10484 10491 10493 10495 10496 10509 10514 10517 10518 10524 10526 10540 10570 10588 10562 10607 10610 10612 10637 10675 10715 10720 10725 10727 10728 10729 10738 10740 10742 10745 10747 10748 10749 10751 10752 10755 10757 10765 10766 10769 10774 10778 10780 10784 10790 10793 10794 10801 10819 10820 10826 10832 10840 10843 10846 10852 10853  10861 10870 10875 10882 10883 10888 10916 10929 10930 10944 10946 10954 10958 10959 10960 10984 10985 10987 10991 10992 10993 10994 11005 11010 11012 11013 11014 11015 11016 11017 11018 11024 11037 11038 11039 11041 11042 11045 11046 11048 11049 11050 11056  11057 10486 10529 1060 10716 10717 10718 10733 10736 10744  10754 10760 10761 10772 10986 9003 10656 10734 10768 0039 0042 10098 1018 10246 10548 10595 10602 10603 10604 10614 10618 10653 10655 10714 10731 10770 10788 10803 10894 10895 10932 2111 1078 11003

INVNUM		= 0032 0043 0048 0049 0051 0098 10116 10118 10188 10237 1024 10247 10253 10263 10310 10400 1041 10416 10419 10444 10476 10478 10481 10481 10556 10561 10566 10577 1062 1064 10674 10739 10764 10799 10812 10835 10988 2120

INVFILES	= $(patsubst %,m%.cnxml,$(INVNUM))
QMLFILES	= m1025.cnxml m10348.cnxml m10349.cnxml m10350.cnxml m10351.cnxml m10352.cnxml m10353.cnxml m10942.cnxml

EDFILES		= $(patsubst %,m%.cnxml,$(EDNUM))
EDOMDOC		= $(patsubst %,m%.omdoc,$(EDNUM))

ALLCNX		= $(shell ls *.cnxml)
ALLOMDOC	= $(patsubst %.cnxml,%.omdoc,$(ALLCNX)) 
BUTFILES	= $(EDFILES) $(INVFILES) $(QMLFILES)
CNX		= $(filter-out $(BUTFILES),$(ALLCNX))
OMDOCFILES	= $(patsubst %.cnxml,%.omdoc,$(CNX)) 
CNXSL		= ../xsl/cnx2omdoc.xsl ../../../xsl/cmml2om.xsl

INV_DTD_TESTED	= $(patsubst %.cnxml,.%.dtd-tested, $(INVFILES))

include $(PREFIX)/lib/Makefile.vars
MOZONLY		= --stringparam mozonly yes
CSS 		= --stringparam css omdoc-cnx.css


echo:		
		echo $(BUTFILES)
#XSLT		= ../../../bin/saxon

all:		4 i html ps mml missing.html

omdoc:		$(OMDOCFILES)		

ed:		$(EDOMDOC)

invtest:	$(INV_DTD_TESTED)

include $(PREFIX)/lib/Makefile.in

$(ALLOMDOC):	%.omdoc: %.cnxml $(CNXSL)
		$(XSLT) -o $@ ../xsl/cnx2omdoc.xsl $(firstword $<) 

